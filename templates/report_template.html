<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Incident Report</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            line-height: 1.6;
            color: #333;
        }
        h1 {
            color: #d9534f;
            margin-bottom: 1rem;
        }
        .section {
            margin-bottom: 20px;
        }
        .label {
            font-weight: bold;
        }
        .image {
            max-width: 100%;
            height: auto;
            border: 1px solid #ccc;
            padding: 4px;
        }
        .badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 8px;
            color: white;
            font-weight: bold;
            margin-left: 8px;
        }
        .sev-green { background-color: green; }
        .sev-yellow { background-color: gold; color: black; }
        .sev-orange { background-color: orange; }
        .sev-red { background-color: red; }
    </style>
</head>
<body>
    <h1>Disaster Incident Report</h1>

    <div class="section">
        <p><span class="label">Date:</span> {{ date }}</p>
        <p><span class="label">Location:</span> {{ location }}</p>
        <p><span class="label">Coordinates:</span> {{ coordinates }}</p>
        <p><span class="label">Hazards:</span> {{ hazards }}</p>
        <p>
            <span class="label">Severity Score:</span> {{ severity }}
            {% if severity is number %}
                <span class="badge
                    {% if severity >= 8 %}
                        sev-red
                    {% elif severity >= 5 %}
                        sev-orange
                    {% elif severity >= 3 %}
                        sev-yellow
                    {% else %}
                        sev-green
                    {% endif %}
                ">
                    SEV-{{ severity }}
                </span>
            {% endif %}
        </p>
        {% if notes %}
        <p><span class="label">Notes:</span> {{ notes }}</p>
        {% endif %}
    </div>

    {% if image_url %}
    <div class="section">
        <img class="image" src="{{ image_url }}" alt="Hazard Image">
    </div>
    {% endif %}

    {% if checklist %}
    <div class="section">
        <p><span class="label">Checklist:</span></p>
        <ul>
            {% for task in checklist %}
                <li>
                    {% if task.completed %}
                        ✅
                    {% else %}
                        ☐
                    {% endif %}
                    {{ task.item }}
                    {% if task.assigned_to and task.assigned_to != 'Unassigned' %}
                        — <em>Assigned to: {{ task.assigned_to }}</em>
                    {% endif %}
                </li>
            {% endfor %}
        </ul>
    </div>
    {% endif %}
</body>
</html>